{% extends "layout.html"%}

{% block content %}
<h3 class="rate-header">Rate This Movie!</h3>
<!-- checks if the movie has a video url attatched to it and will embed a video if there is-->
{% if video != "Empty"%}
<div class="iframe-container">
    <iframe src="https://www.youtube.com/embed/{{video}}?autoplay=1" width="560" height="315" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
{%else%}
<div class="container rating-image"><img class="rateImage" src="static/images/{{request.args.get("fileName")}}" /></div>
{%endif%}

<br />
<form method="POST">
    <div class="form-css form-group" id="ratingform">
        <!-- jinja  if statement to display different variations of the form when there is a previous rating or not -->
        {%if toRate%}

        <label>Title:</label><input type="text" name="title" /><br />
        <label>Year Created:</label><input type="text" name="year" /><br />
        <label>Director:</label><input type="text" name="direct" /><br />
        <label>Rating:</label>
        <p>
            0<input type="range" name="rating" min="0" max="10" />10
        </p>
        <br />
        <label>Summary:</label>
        <input class="input-box" type="text" name="summary" placeholder="Input Summary Here!" value="No Summary Entered" /><br />
        <input class="youtube-box" type="text" name="youtubeID" placeholder="Input Youtube Summary Here!" value="dQw4w9WgXcQ" />
        <div class="ghost">
            <input type='checkbox' value="False" name="toRateAgain" checked />
        </div>

        {%else%}
        <!-- Displays the previous rating and has options to allow the user to change them if need be-->
        <p>
            This has been rated: {{rating}}/10 Stars <br />
            Summary:<br />{{summary}}

        </p>
        <!-- Hidden form inputs that the user cannot use because Key Errors would occur-->
        <div class="ghost">
            <label>Title:</label><input type="text" name="title" value="Place Holder" />
            <label>Year Created:</label><input type="text" name="year" value="xxxx" />
            <label>Director:</label><input type="text" name="direct" value="Place Holder" />
            {{toRate}}
            <input class="form-check-input" type="radio" name="rating" value="{{rating}}" checked>
            <input type="text" name="summary" placeholder="{{summary}}" />
            <input class="youtube-box" type="text" name="youtubeID" placeholder="Input Youtube ID" value="{{video}}" />
            <input type="radio" value="false" name="toRateAgain" checked />
        </div>
        <label>Check this box to rate again or change details</label>
        <input type="radio" value="True" name="toRateAgain" />
        {%endif%}
        <input type="submit" />
    </div>
</form>


{% endblock %}